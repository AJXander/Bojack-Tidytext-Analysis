```{r setup, include=FALSE}
library(knitr)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "C:/Users/Alex/Documents/R Projects/Unstructured Text")
library(tidyverse)
library(tidytext)
library(subtools)
library(magrittr)

library(ggthemes)
library(scales)
library(kableExtra)
theme_set(theme_fivethirtyeight())
setwd("C:/Users/Alex/Documents/R Projects/Unstructured Text")
```

# Importing Data



```{r Import}
s1Raw <- read.subtitles.season("Bojack SRT/Bojack S1 SRT/") %>% subDataFrame()
s2Raw <- read.subtitles.season("Bojack SRT/Bojack S2 SRT/") %>% subDataFrame()
s3Raw <- read.subtitles.season("Bojack SRT/Bojack S3 SRT/") %>% subDataFrame()
s4Raw <- read.subtitles.season("Bojack SRT/Bojack S4 SRT/") %>% subDataFrame()
all_s_Raw <- rbind(s1Raw,s2Raw,s3Raw,s4Raw) %>%
  filter(!str_detect(.$Text, "7ed")) %>% # Removes the sync information.
  filter(!str_detect(.$Text, "[0-9]x")) %>% # Removes episode title
  rename(Line = ID) %>% # Avoids Excel error of reading CSV files as corrupted if column 1 is named "ID"
  mutate(Line = str_remove_all(Line, "\\D"))

all_s_Raw %>% write_excel_csv("ALL_SEASONS_SRT_RAW.csv") # Suitable for transcription of speakers and listeners

```

This gives us a raw CSV file of the dialogue

```{r Example Error, echo=FALSE}
all_s_Raw %>% head(20) %>% kable("html") %>% 
  kable_styling(bootstrap_options = c("striped", "hover"))
```

At this point, the project is diverging into two paths.

The first will be a holistic analysis of the raw text, without assignation to a specific character. This can tell us general information about the show, for example, whether the sentiment of an episode follows a trend from one episode, or one series, to the next.

The second will be to manually transcribe the dialogue, recording the sender and receivers of each line of dialogue. This will be a time-consuming process as there is no simple way to manage this unless I am able to find scripts, as opposed to SRT files, for the show.